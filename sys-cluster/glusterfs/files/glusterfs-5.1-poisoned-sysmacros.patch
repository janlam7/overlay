--- a/libglusterfs/src/compat.h
+++ b/libglusterfs/src/compat.h
@@ -513,6 +513,7 @@
 /* Use run API, see run.h */
 #include <stdlib.h> /* system(), mkostemp() */
 #include <stdio.h>  /* popen() */
+#include <sys/sysmacros.h>
 #pragma GCC poison system mkostemp popen
 #endif
 
